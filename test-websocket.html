<!DOCTYPE html>
<html>
  <head>
    <title>Test Online Status</title>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
  </head>
  <body>
    <h1>WebSocket Online Status Test</h1>
    <div id="status">Connecting...</div>
    <div id="users">No users yet</div>

    <script>
      console.log("Starting WebSocket test...");

      const socket = io("https://pbl4-jecm.onrender.com", {
        query: {
          userId: "test-browser-" + Math.random().toString(36).substr(2, 9),
        },
      });

      const statusDiv = document.getElementById("status");
      const usersDiv = document.getElementById("users");

      socket.on("connect", () => {
        console.log("âœ… Connected:", socket.id);
        statusDiv.innerHTML = `âœ… Connected: ${socket.id}`;
      });

      socket.on("getOnlineUsers", (users) => {
        console.log("ğŸ“± Online users:", users);
        usersDiv.innerHTML = `Online users (${users.length}): ${users.join(
          ", "
        )}`;
      });

      socket.on("connect_error", (error) => {
        console.log("âŒ Error:", error);
        statusDiv.innerHTML = `âŒ Error: ${error.message}`;
      });

      socket.on("disconnect", (reason) => {
        console.log("ğŸ”Œ Disconnected:", reason);
        statusDiv.innerHTML = `ğŸ”Œ Disconnected: ${reason}`;
      });
    </script>
  </body>
</html>
